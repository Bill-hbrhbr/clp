version: "3"

includes:
  cmake-libs:
    flatten: true
    taskfile: "cmake-libs.yaml"
  core: "core.yaml"
  misc-libs:
    flatten: true
    taskfile: "misc-libs.yaml"
  spider: "spider.yaml"
  log-viewer: "log-viewer.yaml"
  utils: "utils.yaml"
  yscope-dev-utils: "../../tools/yscope-dev-utils/exports/taskfiles/utils/utils.yaml"

vars:
  # Directories
  G_DEPS_DIR: "{{.G_BUILD_DIR}}/deps"
  G_DEPS_CPP_DIR: "{{.G_DEPS_DIR}}/cpp"

tasks:
  default:
    deps:
      - "core"
      - "log-viewer"

  init:
    internal: true
    run: "once"
    cmds:
      - "mkdir -p '{{.G_DEPS_DIR}}'"
      - "mkdir -p '{{.G_DEPS_CPP_DIR}}'"
      - "mkdir -p '{{.G_DEPS_CPP_CHECKSUMS_DIR}}'"
      - "mkdir -p '{{.G_DEPS_CPP_CMAKE_SETTINGS_DIR}}'"
